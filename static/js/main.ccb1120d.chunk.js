(this["webpackJsonpunpacked-dev"]=this["webpackJsonpunpacked-dev"]||[]).push([[0],{50:function(e,a,t){},60:function(e,a,t){e.exports=t(84)},82:function(e,a,t){},83:function(e,a,t){},84:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),c=t(24),u=t.n(c),s=t(21),o=t(51),i=t(2),l=t(54),d=t(12),f=t(20),h=t(1),p={user:null,modalShown:!1,wait:!1,addError:""},E={authModalShown:!1,subscribed:!1,authData:null,logoutError:"",wait:!1},m={searchPhrase:"",searchKey:"",pendingPromise:null,gamesFetchError:null},y=t(4),O={gamesByIdWait:{},gamesByIdFetched:{},gamesByIdError:{},games:{}},b={offersForGameWait:{},offersForGameFetched:{},offers:{},offersFetchErrors:{}},I={usersByOfferWait:{},usersByOfferFetched:{},usersByOfferError:{},userByIdWait:!1,userByIdError:null,userUpdateWait:!1,userUpdateError:"",users:{}},C={chatsByParticipantWait:{},chatsByParticipantFetched:{},chatsByParticipantError:{},chats:{},chatAddWait:!1,chatAddError:null},g={clauses:{},clauseAddWait:!1,clauseAddError:null,clausesByChatWait:{},clausesByChatFetched:{},clausesByChatError:{},clausesUpdateWait:!1,clausesUpdateError:null},v={lookupPhrase:"",suggestions:[],suggestionsFetchWait:!1,suggestionsFetchError:null,suggestionsFetched:!1},_={user:null,isSaved:!0},A=t(5),j=t.n(A),U=t(3),R=t.n(U);t(41),t(26);function D(e,a){return{type:"USER_CACHE_FETCH_BY_OFFER",payload:{gameId:e,users:a}}}function F(e){return{type:"USER_CACHE_WAIT_BY_OFFER",payload:{gameId:e}}}function B(e,a){return{type:"USER_CACHE_ERROR_BY_OFFER",payload:{gameId:e}}}function S(e,a){return{type:"USER_CACHE_FETCH_BY_ID",payload:{userId:e,user:a}}}function T(e,a){return{type:"USER_CACHE_UPDATE",payload:{userId:e,user:a}}}function H(e){return{type:"USER_CACHE_UPDATE_ERROR",payload:{userUpdateError:e}}}function w(e){return function(a){var t,r,n;return j.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t=R.a.firestore().collection("users").where("offerIds","array-contains",e),a(F(e)),c.prev=2,c.next=5,j.a.awrap(t.get());case 5:r=c.sent,n=r.docs.reduce((function(e,a){return e[a.id]=a.data(),e}),{}),a(D(e,n)),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(2),a(B(e,c.t0));case 13:case"end":return c.stop()}}),null,null,[[2,10]])}}function W(e){return function(a){var t,r;return j.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=R.a.firestore().collection("users").doc(e),a({type:"USER_CACHE_WAIT_BY_ID"}),n.prev=2,n.next=5,j.a.awrap(t.get());case 5:r=n.sent,a(S(e,r.data()||null)),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),a({type:"USER_CACHE_ERROR_BY_ID",payload:{userByIdError:n.t0}});case 12:case"end":return n.stop()}}),null,null,[[2,9]])}}var P=Object(i.b)((function(){return{}}),(function(e){return{onAuthShowModal:function(){return e({type:"AUTH_SHOW_MODAL"})}}}))((function(e){var a=e.customText,t=e.onAuthShowModal;return n.a.createElement("button",{className:"link",onClick:t},a||"Login")}));var x=Object(i.b)((function(e){return{authData:e.auth.authData}}))((function(e){var a=e.authData;return a?n.a.createElement(d.b,{to:"/offers/:userId".replace(":userId",a.uid)},"My games"):n.a.createElement(P,{customText:"My games"})}));var k=Object(i.b)((function(e){var a=e.auth,t=e.userCache,r=a.authData&&a.authData.uid;return{authData:a.authData,unregistered:null===t.users[r],user:t.users[r]}}))((function(e){var a=e.authData,t=e.unregistered,r=e.user,c=void 0===r?null:r,u=c&&c.name||a.displayName,s=t?"/registration":"/profile/:uid".replace(":uid",a.uid);return n.a.createElement(d.b,{to:s},u)}));var L=Object(i.b)((function(e){var a=e.auth,t=e.userCache,r=a.authData&&a.authData.uid;return{subscribed:a.subscribed,authData:a.authData,unregistered:null===t.users[r],wait:a.wait||t.userByIdWait}}),(function(e){return{onAuthSubscribe:function(){return e((function(e){R.a.auth().onAuthStateChanged((function(a){a?(e(function(e){return{type:"AUTH_LOGIN",payload:{authData:e}}}(a)),e(W(a.uid))):e({type:"AUTH_LOGOUT"})})),e({type:"AUTH_SUBSCRIBE"})}))},onAuthLogout:function(){return e((function(e){return j.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e({type:"AUTH_LOGOUT_WAIT"}),a.prev=1,a.next=4,j.a.awrap(R.a.auth().signOut());case 4:e({type:"AUTH_LOGOUT"}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(1),e({type:"AUTH_LOGOUT_ERROR",payload:{logoutError:a.t0}});case 10:case"end":return a.stop()}}),null,null,[[1,7]])}))}}}))((function(e){var a=e.history,t=e.subscribed,c=e.authData,u=e.unregistered,s=e.wait,o=e.onAuthSubscribe,i=e.onAuthLogout;return Object(r.useEffect)((function(){t||o(),u&&c&&c.uid&&a.push("/registration")}),[t,o,u,c,a]),s?n.a.createElement("nav",null,n.a.createElement("div",null,"wait...")):c?n.a.createElement("nav",null,n.a.createElement(k,null),n.a.createElement("div",{onClick:i},"Logout")):n.a.createElement("nav",null,n.a.createElement(P,null))}));var G=function(e){var a=e.history;return n.a.createElement("header",null,n.a.createElement("nav",null,n.a.createElement("div",null,"UNPACKED"),n.a.createElement(d.b,{to:"/search"},"Find games"),n.a.createElement(x,null),n.a.createElement(d.b,{to:"/chats"},"Deals")),n.a.createElement(L,{history:a}))},N=t(29),M=t(30),Y=t(35),q=t(31),K=t(36),z=t(56),V=t.n(z),J=t(42);t(82);var X=function(e){var a=e.renderCallback,t=e.closeCallback;return Object(r.useEffect)((function(){return window.scrollY&&(document.body.style.top="-".concat(window.scrollY,"px")),document.body.style.width="100%",document.body.style.position="fixed",function(){var e=document.body.style.top;e&&(window.scrollTo(0,parseFloat(e.replace("-","").replace("px",""))),document.body.style.top=""),document.body.style.width="",document.body.style.position=""}})),Object(r.useEffect)((function(){function e(e){"Escape"===e.key&&t&&t(e)}return document.addEventListener("keyup",e),function(){document.removeEventListener("keyup",e)}})),n.a.createElement("div",{className:"modal",onClick:function(e){t&&e.target===e.currentTarget&&t(e)}},n.a.createElement("div",{className:"modal__body"},a()))},Z={signInFlow:"popup",signInOptions:[R.a.auth.GoogleAuthProvider.PROVIDER_ID,R.a.auth.EmailAuthProvider.PROVIDER_ID],credentialHelper:J.auth.CredentialHelper.NONE,callbacks:{signInSuccessWithAuthResult:function(){return!1}}};var $=Object(i.b)(null,(function(e){return{onHideModal:function(){return e({type:"AUTH_HIDE_MODAL"})}}}))((function(e){var a=e.onHideModal;return n.a.createElement(X,{renderCallback:function(){return n.a.createElement(V.a,{uiConfig:Z,firebaseAuth:R.a.auth()})},closeCallback:a})}));function Q(e,a){return{type:"GAME_CACHE_FETCH_BY_ID",payload:{gameId:e,game:a}}}function ee(e){return{type:"GAME_CACHE_WAIT_BY_ID",payload:{gameId:e}}}function ae(e){return function(a){var t,r;return j.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=R.a.firestore().collection("games").doc(e),a(ee(e)),n.prev=2,n.next=5,j.a.awrap(t.get());case 5:r=n.sent,a(Q(e,r.data()||null)),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),a((n.t0,{type:"GAME_CACHE_ERROR_BY_ID"}));case 12:case"end":return n.stop()}}),null,null,[[2,9]])}}function te(e){return{type:"GAME_FINDER_FETCH",payload:{pendingPromise:e}}}function re(e,a){return{type:"GAME_FINDER_FETCH_WAIT",payload:{searchKey:e,pendingPromise:a}}}function ne(e,a){return{type:"GAME_FINDER_FETCH_ERROR",payload:{gamesFetchError:e,pendingPromise:a}}}var ce=Object(i.b)((function(e){var a=e.gameFinder;return{searchPhrase:a.searchPhrase,searchKey:a.searchKey}}),(function(e){return{onGameFinderSearchPhrase:function(a){e(function(e){return{type:"GAME_FINDER_SEARCH_PHRASE",payload:{searchPhrase:e}}}(a))},onGameFinderFetchRequest:function(a){e(function(e){return function(a){var t,r;return j.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:t=R.a.firestore().collection("games").where("searchKeys","array-contains",e),(r=t.get()).then((function(e){var t=e.docs.reduce((function(e,a){return e[a.id]=a.data(),e}),{});for(var n in a(te(r)),t)a(Q(n,t[n]))}),(function(e){a(ne(e,r))})),a(re(e,r));case 4:case"end":return n.stop()}}))}}(a))},onGameFinderFetchCancel:function(){e({type:"GAME_FINDER_FETCH_CANCEL"})}}}))((function(e){var a=e.searchPhrase,t=e.searchKey,r=e.onGameFinderSearchPhrase,c=e.onGameFinderFetchRequest,u=e.onGameFinderFetchCancel;return n.a.createElement("input",{type:"text",placeholder:"start typing game name...",value:a,onChange:function(e){var a=e.target.value,n=a.toLowerCase().trim().substring(0,2);n.length<2&&t?u():2===n.length&&n!==t&&c(n),r(a)}})}));var ue=function(e){var a=e.wait,t=e.error,r=void 0===t?"Game is not in wait or error state":t;return a?n.a.createElement("div",{className:"game"},n.a.createElement("div",null,"Wait..."),n.a.createElement("div",null,"Loading")):n.a.createElement("div",{className:"game"},n.a.createElement("div",null,"Error"),n.a.createElement("div",null,r))},se=function(e){function a(){return Object(N.a)(this,a),Object(Y.a)(this,Object(q.a)(a).apply(this,arguments))}return Object(K.a)(a,e),Object(M.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"game"},n.a.createElement("div",null,this.props.game.platform),n.a.createElement("img",{className:"game-img",src:this.props.game.pic,alt:this.props.game.name}))}}]),a}(n.a.Component);var oe=Object(i.b)((function(e,a){var t=e.gameCache,r=a.gameId;return{game:t.games[r],wait:t.gamesByIdWait[r],error:t.gamesByIdError[r]}}),(function(e){return{fetchById:function(a){e(ae(a))}}}))((function(e){var a=e.gameId,t=e.game,c=e.fetchWait,u=e.fetchError,s=e.fetchById;if(Object(r.useEffect)((function(){t||c||u||s(a)})),t)return n.a.createElement("div",{className:"game-tile"},n.a.createElement(se,{game:t,gameId:a}));var o=c||!t&&!c&&!u;return n.a.createElement("div",{className:"game-tile"},n.a.createElement(ue,{wait:o,error:u}))}));var ie=Object(i.b)((function(e){var a=e.auth,t=e.userCache;return{userId:a.authData&&a.authData.uid,user:t[a.authData&&a.authData.uid]}}),(function(e){return{onUserCacheAddUserGameRequest:function(a,t,r){e(function(e,a,t){return function(r){var n,c,u,s;return j.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return n=R.a.firestore().collection("users").doc(e),r({type:"USER_CACHE_UPDATE_WAIT"}),o.prev=2,o.next=5,j.a.awrap(n.get());case 5:if(c=o.sent,(u=c.data())[s=t?"demandIds":"offerIds"]&&!(u[s].indexOf(a)<0)){o.next=13;break}return o.next=11,j.a.awrap(n.update(Object(y.a)({},s,R.a.firestore.FieldValue.arrayUnion(a))));case 11:u[s]=u[s]||[],u[s].push(a);case 13:r(T(e,u)),o.next=19;break;case 16:o.prev=16,o.t0=o.catch(2),r(H(o.t0));case 19:case"end":return o.stop()}}),null,null,[[2,16]])}}(a,t,r)),e({type:"OFFERS_ADD_HIDE_MODAL"})}}}))((function(e){var a=e.game,t=e.gameId,r=e.userId,c=(e.user,e.onUserCacheAddUserGameRequest);return n.a.createElement("div",{className:"offers-add-suggestion",onClick:function(){c(r,t,!1)}},n.a.createElement(oe,{game:a,gameId:t}))}));var le=Object(i.b)((function(e){var a=e.gameCache,t={},r=e.gameFinder.searchPhrase.toLowerCase();for(var n in a.games){var c=a.games[n];c.tags.some((function(e){return 0===e.toLowerCase().indexOf(r)}))&&(t[n]=c)}return{games:t}}))((function(e){var a=e.games,t=[];for(var r in a)t.push(n.a.createElement(ie,{gameId:r,game:a[r],key:r}));return t})),de={backgroundColor:"white",minHeight:"400px",width:"700px",padding:"12px",textAlign:"initial"};var fe=Object(i.b)((function(e){return{}}),(function(e){return{onOffersAddHideModal:function(){e({type:"OFFERS_ADD_HIDE_MODAL"})}}}))((function(e){var a=e.onOffersAddHideModal;return n.a.createElement(X,{renderCallback:function(){return n.a.createElement("div",{style:de},n.a.createElement("h3",null,"Offer a game"),n.a.createElement("select",null,n.a.createElement("option",null,"PS4"),n.a.createElement("option",null,"XBOX")),n.a.createElement(ce,null),n.a.createElement("div",null,n.a.createElement(le,null)))},closeCallback:a})})),he=function(e){function a(){return Object(N.a)(this,a),Object(Y.a)(this,Object(q.a)(a).apply(this,arguments))}return Object(K.a)(a,e),Object(M.a)(a,[{key:"render",value:function(){return this.props.authModalShown?n.a.createElement($,null):this.props.offersAddModalShown?n.a.createElement(fe,null):null}}]),a}(n.a.PureComponent),pe=Object(i.b)((function(e){var a=e.auth,t=e.offersAdd;return{authModalShown:a.authModalShown,offersAddModalShown:t.modalShown}}))(he);var Ee=Object(i.b)((function(e,a){var t=e.userCache,r=a.gameId;return{userCount:Object.values(t.users).filter((function(e){return e&&e.offerIds&&e.offerIds.indexOf(r)>=0})).length,wait:t.usersByOfferWait[r],error:t.usersByOfferError[r],fetched:t.usersByOfferFetched[r]}}),(function(e){return{onUserCacheFetchByOfferRequest:function(a){e(w(a))}}}))((function(e){var a=e.gameId,t=e.userCount,c=e.wait,u=e.error,s=e.fetched,o=e.onUserCacheFetchByOfferRequest;return Object(r.useEffect)((function(){c||s||o(a)}),[a,c,s,o]),c?n.a.createElement("span",null,"Wait ..."):u?n.a.createElement("span",null,u.toString()):!!s&&t}));var me=function(e){var a=e.gameId,t=(e.game,"/game/:gameId".replace(":gameId",a));return n.a.createElement(d.b,{to:t},n.a.createElement("div",null,n.a.createElement(oe,{gameId:a}),n.a.createElement(Ee,{gameId:a})))};var ye=function(e){var a=e.games,t=[];for(var r in a)t.push(n.a.createElement(me,{gameId:r,game:a[r],key:r}));return t};var Oe=Object(i.b)((function(e){e.statePart;return{}}),(function(e){return{}}))((function(){return n.a.createElement("input",{type:"text",placeholder:"Type in the adderss"})})),be=t(86),Ie=t(88),Ce=t(85),ge=t(87);var ve=Object(i.b)((function(e){e.statePart;return{}}),(function(e){return{}}))((function(e){var a=e.position,t=e.name;return a[0]&&a[1]?n.a.createElement(Ce.a,{position:a},n.a.createElement(ge.a,null,t)):n.a.createElement(Ce.a,{position:[55.7558,37.6173]},n.a.createElement(ge.a,null,"Unknown position "+t))})),_e=(t(50),{width:"500px",height:"500px"});var Ae=Object(i.b)((function(e,a){var t=e.auth,r=e.userCache,n=a.games,c=t.authData&&t.authData.uid,u={};for(var s in n)for(var o in r.users){var i=r.users[o];if(i&&i.offerIds&&i.offerIds.indexOf(s)>=0){u[o]=i;break}}return{authData:t.authData,user:r.users[c],users:u}}),(function(e){return{}}))((function(e){e.user;var a=e.users;return n.a.createElement(be.a,{center:[55.7558,37.6173],zoom:10,style:_e,scrollWheelZoom:!1},n.a.createElement(Ie.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),function(e){return Object.values(e).map((function(e){return n.a.createElement(ve,{key:e.id,name:e.name,position:[e.latitude,e.longitude]})}))}(a))}));var je=Object(i.b)((function(e){var a=e.gameCache,t={},r=e.gameFinder.searchPhrase.toLowerCase();for(var n in a.games){var c=a.games[n];c.tags.some((function(e){return 0===e.toLowerCase().indexOf(r)}))&&(t[n]=c)}return{games:t}}))((function(e){var a=e.games;return n.a.createElement("div",{class:"search-panel"},n.a.createElement("div",{class:"search-panel_part"},n.a.createElement(ce,null),n.a.createElement(ye,{games:a})),n.a.createElement("div",{class:"search-panel_part"},n.a.createElement(Oe,null),n.a.createElement(Ae,{games:a})))}));var Ue=Object(i.b)((function(e){return{}}),(function(e){return{onOffersAddShowModal:function(a){e(function(e){return{type:"OFFERS_ADD_SHOW_MODAL",payload:{user:e}}}(a))}}}))((function(e){var a=e.onOffersAddShowModal;return n.a.createElement("div",{className:"game-tile"},n.a.createElement("div",{className:"game",onClick:a},n.a.createElement("div",null,"platform"),n.a.createElement("div",{className:"game-img"},"+")))}));var Re=Object(i.b)((function(e){var a=e.auth;return{authUserId:a.authData&&a.authData.uid}}),(function(e){return{onOffersDeleteRequest:function(a,t){e(function(e,a,t){return function(r){var n,c,u,s;return j.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return n=R.a.firestore().collection("users").doc(e),r({type:"USER_CACHE_UPDATE_WAIT"}),o.prev=2,o.next=5,j.a.awrap(n.get());case 5:if(c=o.sent,!((u=c.data())[s=t?"demandIds":"offerIds"]&&u[s].indexOf(a)>=0)){o.next=12;break}return o.next=11,j.a.awrap(n.update(Object(y.a)({},s,R.a.firestore.FieldValue.arrayRemove(a))));case 11:u[s]=u[s].filter((function(e){return e!==a}));case 12:r(T(e,u)),o.next=18;break;case 15:o.prev=15,o.t0=o.catch(2),r(H(o.t0));case 18:case"end":return o.stop()}}),null,null,[[2,15]])}}(a,t,!1))}}}))((function(e){var a=e.gameId,t=e.ownerId,r=e.authUserId,c=e.onOffersDeleteRequest,u=r===t?n.a.createElement("button",{className:"offer-delete",onClick:function(){return c(t,a)}},"\xd7"):"";return n.a.createElement("div",{className:"offer"},n.a.createElement(oe,{gameId:a}),u)}));var De=function(e){var a=e.gameIds,t=e.ownerId;if(a&&Object.values(a>0)){var r=[],c=!0,u=!1,s=void 0;try{for(var o,i=a[Symbol.iterator]();!(c=(o=i.next()).done);c=!0){var l=o.value;r.push(n.a.createElement(Re,{gameId:l,key:l,ownerId:t}))}}catch(d){u=!0,s=d}finally{try{c||null==i.return||i.return()}finally{if(u)throw s}}return r}return n.a.createElement("h3",null,"Game list is empty...")};var Fe=Object(i.b)((function(e,a){var t=e.auth,r=e.userCache,n=a.match;return{authData:t.authData,wait:r.userByIdWait,user:r.users[n.params.userId]}}),(function(e){return{onUserCacheFetchUserByIdRequest:function(a){return e(W(a))}}}))((function(e){var a=e.history,t=e.match,c=e.authData,u=e.wait,s=e.user,o=e.onUserCacheFetchUserByIdRequest;if(Object(r.useEffect)((function(){c&&t.params.userId?o(t.params.userId):c&&!t.params.userId&&a.push("/offers/:userId".replace(":userId",c.uid))}),[c,o,t.params.userId,a]),u)return n.a.createElement("div",null,"Wait...");if(s){var i=t.params.userId===(c&&c.uid);return n.a.createElement("div",null,i&&n.a.createElement(Ue,null),n.a.createElement(De,{gameIds:s.offerIds,ownerId:t.params.userId}))}return!1}));var Be=function(){return n.a.createElement("div",null,"Please Authenticate ",n.a.createElement(P,null))};function Se(e){return{type:"USER_UPDATE_UNSAVED",payload:{user:e}}}function Te(e){return{type:"USER_UPDATE_SAVED",payload:{user:e}}}function He(e,a){return function(t){t(function(e,a,t){return function(r){var n,c,u;return j.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return n=R.a.firestore().collection("users").doc(e),r({type:"USER_CACHE_UPDATE_WAIT"}),s.prev=2,s.next=5,j.a.awrap(n.get());case 5:return c=s.sent,u=Object(h.a)({},c.data(),{},a),s.next=9,j.a.awrap(n.update(u));case 9:r(T(e,u)),t(u),s.next=16;break;case 13:s.prev=13,s.t0=s.catch(2),r(H(s.t0));case 16:case"end":return s.stop()}}),null,null,[[2,13]])}}(e,a,(function(e){return t(Te(e))})))}}function we(e,a){return function(t){t(function(e,a,t){return function(r){var n;return j.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return n=R.a.firestore().collection("users").doc(e),r({type:"USER_CACHE_UPDATE_WAIT"}),c.prev=2,c.next=5,j.a.awrap(n.set(a));case 5:r(T(e,a)),t(a),c.next=12;break;case 9:c.prev=9,c.t0=c.catch(2),r(H(c.t0));case 12:case"end":return c.stop()}}),null,null,[[2,9]])}}(e,a,(function(e){return t(Te(e))})))}}var We=Object(i.b)((function(e,a){var t=e.userCache,r=e.auth,n=e.userUpdate,c=a.userId;return{user:t.users[c],updatedUser:n.user,isSelf:r.authData.uid===c,wait:t.userByIdWait||t.userUpdateWait}}),(function(e){return{onNameUpdate:function(a,t){e(Se(Object(h.a)({},a,{name:t})))}}}))((function(e){e.userId;var a=e.user,t=e.updatedUser,r=e.isSelf,c=e.wait,u=e.onNameUpdate,s="";return a&&a.name&&(s=a.name),c?n.a.createElement("div",null,"wait..."):r?("string"===typeof(t&&t.name)&&(s=t.name),n.a.createElement("div",null,n.a.createElement("input",{type:"text",placeholder:"name",value:s,onChange:function(e){u(a,e.target.value)}}))):n.a.createElement("label",null," name: ",s)}));var Pe=function(){return n.a.createElement("div",null,"Profile footer here")};var xe=Object(i.b)((function(e,a){var t=e.userCache,r=e.auth,n=e.userUpdate,c=a.userId;return{user:t.users[c],updatedUser:n.user,isSelf:r.authData.uid===c,wait:t.userByIdWait||t.userUpdateWait}}),(function(e){return{onProfileUserSaveRequest:function(a,t){e(He(a,t))},onProfileUserCreateRequest:function(a,t){e(we(a,t))}}}))((function(e){var a=e.userId,t=e.isRegistration,r=void 0!==t&&t,c=e.updatedUser,u=e.onProfileUserSaveRequest,s=e.onProfileUserCreateRequest;return n.a.createElement("div",null,n.a.createElement("button",{onClick:function(){if(r)return s(a,c);u(a,c)}},"Save"))})),ke=t(25),Le={width:"500px",height:"500px"};var Ge=Object(i.b)((function(e,a){var t=e.userCache,r=e.auth,n=e.userUpdate,c=a.userId;return{user:t.users[c],updatedUser:n.user,isSelf:r.authData.uid===c,wait:t.userByIdWait||t.userUpdateWait}}))((function(e){var a=e.user,t=e.updatedUser,r=(e.isSelf,e.wait,function(e,a){return a&&"number"===typeof a.longitude&&"number"===typeof a.longitude?[[a.latitude,a.longitude],"Selected locaction"]:e&&"number"===typeof e.longitude&&"number"===typeof e.longitude?[[e.latitude,e.longitude],"Saved location"]:[[55.7558,37.6173],"Unselected, please specify your location"]}(a,t)),c=Object(ke.a)(r,2),u=c[0],s=c[1];return n.a.createElement(be.a,{center:u,zoom:18,style:Le,scrollWheelZoom:!1},n.a.createElement(Ie.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),n.a.createElement(Ce.a,{position:u},n.a.createElement(ge.a,null,s)))}));function Ne(e){return{type:"ADDRESS_LOOKUP_CACHE_FETCH",payload:{suggestions:e}}}function Me(e){return{type:"ADDRESS_LOOKUP_CACHE_FETCH_WAIT",payload:{lookupPhrase:e}}}var Ye=Object(i.b)((function(e,a){var t=e.userCache,r=e.auth,n=e.userUpdate,c=a.userId;return{user:t.users[c],updatedUser:n.user,isSelf:r.authData.uid===c,wait:t.userByIdWait||t.userUpdateWait}}),(function(e){return{onAddressLookup:function(a){e(function(e){return function(a){var t,r,n;return j.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t="https://nominatim.openstreetmap.org?osm_ids=[N]&format=json&limit=5&q="+encodeURI(e),a(Me(e)),c.prev=2,c.next=5,j.a.awrap(fetch(t));case 5:return r=c.sent,c.next=8,j.a.awrap(r.json());case 8:n=c.sent,a(Ne(n)),c.next=15;break;case 12:c.prev=12,c.t0=c.catch(2),a({type:"ADDRESS_LOOKUP_CACHE_FETCH_ERROR",payload:{suggestionsFetchError:c.t0}});case 15:case"end":return c.stop()}}),null,null,[[2,12]])}}(a))}}}))((function(e){var a=e.user,t=e.updatedUser,c=(e.isSelf,e.wait,e.onAddressLookup),u=Object(r.useState)(""),s=Object(ke.a)(u,2),o=s[0],i=s[1];return Object(r.useEffect)((function(){"string"===typeof(t&&t.place)?i(t.place):a&&a.place&&i(a.place)}),[t,a]),n.a.createElement("div",null,n.a.createElement("input",{type:"text",value:o,onChange:function(e){i(e.target.value)}}),n.a.createElement("button",{type:"button",onClick:function(){return j.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:c(o);case 1:case"end":return e.stop()}}))}},"Search"))}));var qe=Object(i.b)((function(e){return{user:e.userUpdate.user}}),(function(e){return{onLocationUpdate:function(a,t,r,n){e(Se(Object(h.a)({},a,{place:t,longitude:r,latitude:n})))}}}))((function(e){var a=e.suggestion,t=e.user,r=e.onLocationUpdate;return n.a.createElement("li",{onClick:function(){r(t,a.display_name,+a.lon,+a.lat)}},a.display_name)}));var Ke=Object(i.b)((function(e){var a=e.addressLookupCache;return{wait:a.wait,suggestions:a.suggestions}}),(function(e){return{}}))((function(e){var a=e.wait,t=e.suggestions;return a?n.a.createElement("div",null,"Loading..."):n.a.createElement("ul",null,function(e){return e.map((function(e){return n.a.createElement(qe,{key:e.place_id,suggestion:e})}))}(t))}));var ze=Object(i.b)((function(e){return{authData:e.auth.authData}}),(function(e){return{onUserCacheFetchUserByIdRequest:function(a){e(W(a))}}}))((function(e){var a=e.match,t=e.authData,c=e.onUserCacheFetchUserByIdRequest,u=a.params.uid;return Object(r.useEffect)((function(){t&&c(u)})),t?n.a.createElement("div",null,n.a.createElement(We,{userId:u}),n.a.createElement(Ye,{userId:u}),n.a.createElement(Ke,null),n.a.createElement(Ge,{userId:u}),n.a.createElement(xe,{userId:u}),n.a.createElement(Pe,null)):n.a.createElement(Be,null)}));var Ve=Object(i.b)((function(e){var a=e.userCache,t=e.auth,r=e.userUpdate;return{registeredUser:t.authData&&a.users[t.authData.uid],authData:t.authData,updatedUser:r.user,wait:a.userByIdWait||a.userUpdateWait}}),(function(e){return{onProfileUserUnregistered:function(a){var t={name:a.displayName};e(Se(t))}}}))((function(e){var a=e.history,t=e.registeredUser,c=e.authData,u=e.updatedUser,s=e.onProfileUserUnregistered;return Object(r.useEffect)((function(){c&&t&&a.push("/profile/:uid".replace(":uid",c.uid)),c&&!u&&s(c)}),[c,u,s,a,t]),c?n.a.createElement("div",null,n.a.createElement(We,{userId:c.uid}),n.a.createElement(xe,{userId:c.uid,isRegistration:!0})):n.a.createElement(Be,null)}));function Je(e,a){return{type:"CHAT_CACHE_FETCH_BY_PARTICIPANT",payload:{participantId:e,chats:a}}}function Xe(e){return{type:"CHAT_CACHE_WAIT_BY_PARTICIPANT",payload:{participantId:e}}}function Ze(e,a){return{type:"CHAT_CACHE_ERROR_BY_PARTICIPANT",payload:{participantId:e,chatsByParticipantError:a}}}function $e(e,a){return{type:"CHAT_CACHE_ADD_PUSH",payload:{chatId:e,chat:a}}}function Qe(e){return function(a){var t,r,n;return j.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t=R.a.firestore().collection("chats").where("participantIds","array-contains",e),a(Xe(e)),c.prev=2,c.next=5,j.a.awrap(t.get());case 5:r=c.sent,n=r.docs.reduce((function(e,a){return e[a.id]=a.data(),e}),{}),a(Je(e,n)),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(2),a(Ze(e,c.t0));case 13:case"end":return c.stop()}}),null,null,[[2,10]])}}function ea(e,a){return{type:"CLAUSE_CACHE_ADD_PUSH",payload:{clauseId:e,clause:a}}}function aa(e,a){return{type:"CLAUSE_CACHE_FETCH_BY_CHAT",payload:{chatId:e,clauses:a}}}function ta(e){return{type:"CLAUSE_CACHE_WAIT_BY_CHAT",payload:{chatId:e}}}function ra(e,a){return{type:"CLAUSE_CACHE_ERROR_BY_CHAT",payload:{chatId:e,clausesByChatError:a}}}function na(e,a){return{type:"CLAUSE_CACHE_UPDATE_STATUS",payload:{clauseId:e,clause:a}}}function ca(e,a,t,r,n,c,u){return function(s){var o,i;return j.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return o={chatId:e,ownerId:a,suggesterId:t,respondentId:r,gameId:n,status:"CLAUSE_STATUS_SUGGESTED",isDemand:c,date:new Date},s({type:"CLAUSE_CACHE_ADD_WAIT"}),l.prev=2,l.next=5,j.a.awrap(R.a.firestore().collection("clauses").add(o));case 5:i=l.sent,s(ea(i.id,o)),"function"===typeof u&&u(i.id),l.next=13;break;case 10:l.prev=10,l.t0=l.catch(2),s((l.t0,{type:"CLAUSE_CACHE_ADD_ERROR",payload:{addError:void 0}}));case 13:case"end":return l.stop()}}),null,null,[[2,10]])}}function ua(e){return function(a){var t,r,n;return j.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t=R.a.firestore().collection("clauses").where("chatId","==",e).where("status","in",["CLAUSE_STATUS_SUGGESTED","CLAUSE_STATUS_ACCEPTED"]),a(ta(e)),c.prev=2,c.next=5,j.a.awrap(t.get());case 5:r=c.sent,n=r.docs.reduce((function(e,a){return e[a.id]=a.data(),e}),{}),a(aa(e,n)),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(2),a(ra(e,c.t0));case 13:case"end":return c.stop()}}),null,null,[[2,10]])}}function sa(e,a){return function(t){var r;return j.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return r=R.a.firestore().collection("clauses").doc(e),t({type:"CLAUSE_CACHE_UPDATE_WAIT"}),n.prev=2,n.next=5,j.a.awrap(r.update({status:a.status}));case 5:t(na(e,a)),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(2),t((n.t0,{type:"CLAUSE_CACHE_UPDATE_ERROR"}));case 11:case"end":return n.stop()}}),null,null,[[2,8]])}}var oa=Object(i.b)((function(e,a){var t=e.auth,r=e.chatCache,n=a.ownerId,c=t.authData&&t.authData.uid,u=null;for(var s in r.chats){var o=r.chats[s];if(Array.isArray(o.participantIds)&&o.participantIds.indexOf(c)>=0&&o.participantIds.indexOf(n)>=0){u=s;break}}return{authenticatedUserId:c,fetched:r.chatsByParticipantFetched[c],waitFetch:r.chatsByParticipantWait[c],dealChatId:u}}),(function(e){return{onChatCacheFetchByParticipantRequest:function(a){e(Qe(a))},onChatAndClauseAddRequest:function(a,t,r,n,c,u){var s,o;e((s=[t,r],o=function(s){e(ca(s,a,t,r,n,c,(function(){u("/chats/:chatId".replace(":chatId",s))})))},function(e){var a,t;return j.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a={participantIds:s},e({type:"CHAT_CACHE_ADD_WAIT"}),r.prev=2,r.next=5,j.a.awrap(R.a.firestore().collection("chats").add(a));case 5:t=r.sent,e($e(t.id,a)),"function"===typeof o&&o(t.id),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(2),e({type:"CHAT_CACHE_ADD_ERROR",payload:{addError:r.t0}});case 13:case"end":return r.stop()}}),null,null,[[2,10]])}))},onClauseAddRequest:function(a,t,r,n,c,u,s){e(ca(a,t,r,n,c,u,(function(){s("/chats/:chatId".replace(":chatId",a))})))}}}))((function(e){var a=e.ownerId,t=e.gameId,c=e.authenticatedUserId,u=e.fetched,s=e.waitFetch,o=e.dealChatId,i=e.onChatCacheFetchByParticipantRequest,l=e.onChatAndClauseAddRequest,d=e.onClauseAddRequest;Object(r.useEffect)((function(){s||u||i(c)}),[c,u,s,i]);var h=Object(r.useState)(""),p=Object(ke.a)(h,2),E=p[0],m=p[1];return E?n.a.createElement(f.a,{to:E}):c?s?n.a.createElement("span",null,"loading..."):!!u&&n.a.createElement("button",{onClick:function(){o?d(o,a,c,a,t,!1,m):l(a,c,a,t,!1,m)}},"get"):n.a.createElement("span",null,"Please authenticate")}));var ia=Object(i.b)((function(e){var a=e.auth;return{userId:a.authData&&a.authData.uid}}))((function(e){var a=e.gameId,t=e.userId,r=e.ownerId,c=e.user;return t===r?n.a.createElement("div",null,"User: ",c.name," ",n.a.createElement("small",null,"my offer")):n.a.createElement("div",null,"User: ",c.name," ",n.a.createElement(oa,{ownerId:r,gameId:a}))}));var la=Object(i.b)((function(e,a){var t=e.userCache,r=a.gameId,n={};for(var c in t.users)t.users[c].offerIds&&t.users[c].offerIds.indexOf(r)>=0&&(n[c]=t.users[c]);return{users:n,wait:t.usersByOfferWait[r],error:t.usersByOfferError[r],fetched:t.usersByOfferFetched[r]}}),(function(e){return{onUserCacheFetchByOfferRequest:function(a){e(w(a))}}}))((function(e){var a=e.gameId,t=e.users,c=e.wait,u=(e.error,e.fetched),s=e.onUserCacheFetchByOfferRequest;Object(r.useEffect)((function(){c||u||s(a)}),[a,c,u,s]);var o=[];for(var i in t)o.push(n.a.createElement(ia,{gameId:a,user:t[i],ownerId:i,key:i}));return o}));var da=function(e){var a=e.match;return n.a.createElement("div",null,n.a.createElement(oe,{gameId:a.params.gameId}),n.a.createElement(la,{gameId:a.params.gameId}))};var fa=Object(i.b)((function(e){var a=e.auth;return{userId:a.authData&&a.authData.uid}}),(function(e){return{}}))((function(e){var a=e.chatId,t=(e.chat,e.userId,"/chats/:chatId".replace(":chatId",a));return n.a.createElement("div",null,n.a.createElement(d.b,{to:t},a))}));var ha=Object(i.b)((function(e){var a=e.auth,t=e.chatCache,r=a.authData&&a.authData.uid;return{userId:r,wait:t.chatsByParticipantWait[r],error:t.chatsByParticipantError[r],fetched:t.chatsByParticipantFetched[r],chats:t.chats}}),(function(e){return{fetchChats:function(a){e(Qe(a))}}}))((function(e){e.history,e.match;var a=e.userId,t=e.wait,c=e.error,u=e.fetched,s=e.chats,o=e.fetchChats;return Object(r.useEffect)((function(){!a||t||c||u||o(a)})),c?n.a.createElement("div",null,c.toString()):t?n.a.createElement("div",null,"Wait..."):function(e){var a=[];for(var t in e)a.push(n.a.createElement(fa,{key:t,chatId:t,chat:e[t]}));return a}(function(e,a){var t={};for(var r in e)e[r]&&Array.isArray(e[r].participantIds)&&e[r].participantIds.indexOf(a)>=0&&(t[r]=e[r]);return t}(s,a))}));var pa=Object(i.b)((function(e){var a=e.auth;return{userId:a.authData&&a.authData.uid}}),(function(e,a){var t=a.clauseId,r=a.clause;return{acceptClause:function(){e(sa(t,Object(h.a)({},r,{status:"CLAUSE_STATUS_ACCEPTED"})))},rejectClause:function(){e(sa(t,Object(h.a)({},r,{status:"CLAUSE_STATUS_REJECTED"})))}}}))((function(e){e.clauseId;var a=e.clause,t=e.userId,r=e.acceptClause,c=e.rejectClause;return n.a.createElement("div",null,n.a.createElement(oe,{gameId:a.gameId}),a.respondentId===t&&"CLAUSE_STATUS_ACCEPTED"!==a.status&&n.a.createElement("button",{onClick:r},"accept"),n.a.createElement("button",{onClick:c},"reject"))}));var Ea=Object(i.b)((function(e){return{clauses:e.clauseCache.clauses}}),(function(e){return{}}))((function(e){var a=e.chatId,t=e.clauses,r=[];for(var c in t)a&&t[c].chatId===a&&r.push({id:c,isClause:!0,date:t[c].date});return r.sort((function(e,a){return e.date-a.date})),r.map((function(e){return n.a.createElement(pa,{clauseId:e.id,key:e.id,clause:t[e.id]})}))}));var ma=Object(i.b)((function(e){var a=e.auth,t=e.clauseCache;return{userId:a.authData&&a.authData.uid,clauses:t.clauses}}),(function(e){return{onClauseFetchRequest:function(a){e(ua(a))}}}))((function(e){var a=e.match,t=e.userId,c=(e.clauses,e.onClauseFetchRequest);return Object(r.useEffect)((function(){t&&a.params.chatId&&c(a.params.chatId)}),[t,a.params.chatId,c]),t?n.a.createElement(Ea,{chatId:a.params.chatId}):n.a.createElement(Be,null)})),ya=t(59);var Oa=Object(i.b)((function(e){var a=e.auth,t=e.gameCache;return{userId:a.authData&&a.authData.uid,games:t.games}}),(function(e){return{}}))((function(e){var a=e.chatClausesArray,t=e.games,r=e.userId;return n.a.createElement("div",null,"Price accepted: ",function(e,a,t,r){return e.reduce((function(e,n){if(n.status!==r)return e;var c=+a[n.gameId].unpackedPrice;return t===n.ownerId?e+c:e-c}),0)}(a,t,r,"CLAUSE_STATUS_ACCEPTED"))}));var ba=Object(i.b)((function(e,a){var t=e.clauseCache,r=a.chatId,n={};for(var c in t.clauses)r&&t.clauses[c]&&t.clauses[c].chatId===r&&(n[c]=t.clauses[c]);return{chatClauses:n}}))((function(e){var a=e.chatClauses,t=[];for(var r in a){var c=n.a.createElement(pa,{key:r,clauseId:r,clause:a[r]});t.push(c)}return t}));var Ia=Object(i.b)((function(e,a){var t=e.clauseCache,r=e.gameCache,n=a.chatId,c=Object.values(t.clauses).filter((function(e){return e.chatId=n})),u=c.reduce((function(e,a){return r.gamesByIdError[a.gameId]?[].concat(Object(ya.a)(e),[r.gamesByIdError[a.gameId]]):e}),[]),s=c.every((function(e){return r.gamesByIdFetched[e.gameId]})),o=c.some((function(e){return r.gamesByIdWait[e.gameId]})),i=c.every((function(e){return r.games[e.gameId]}));return{chatClausesArray:c,games:r.games,gamesByIdWait:r.gamesByIdWait,gamesFetchErrors:u,isGamesFetched:s,isGamesWait:o,hasAllRequiredGames:i}}),(function(e){return{fetchGames:function(a,t,r){e(function(e,a,t){return function(r){return j.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:e.forEach((function(e){t[e]||a[e]||r(ae(e))}));case 1:case"end":return n.stop()}}))}}(a,t,r))}}}))((function(e){var a=e.chatId,t=e.chatClausesArray,c=e.games,u=e.gamesByIdWait,s=e.gamesFetchErrors,o=e.isGamesFetched,i=e.isGamesWait,l=e.hasAllRequiredGames,d=e.fetchGames;return Object(r.useEffect)((function(){var e=t.map((function(e){return e.gameId}));d(e,c,u)})),i||!o?n.a.createElement("div",null,"Wait..."):l?n.a.createElement("div",null,n.a.createElement(ba,{chatId:a}),n.a.createElement(Oa,{chatClausesArray:t})):n.a.createElement("div",null,"Error fetching Games",n.a.createElement("pre",null,JSON.stringify(s)))}));var Ca=Object(i.b)((function(e){var a=e.auth,t=e.clauseCache;return{userId:a.authData&&a.authData.uid,clausesByChatWait:t.clausesByChatWait}}),(function(e){return{onClauseFetchRequest:function(a){e(ua(a))}}}))((function(e){var a=e.match,t=e.userId,c=e.clausesByChatWait,u=e.onClauseFetchRequest,s=a.params.chatId;return Object(r.useEffect)((function(){t&&a.params.chatId&&u(a.params.chatId)}),[t,a.params.chatId,u]),t?!1!==c[s]?n.a.createElement("div",null,"Wait..."):n.a.createElement(Ia,{chatId:s}):n.a.createElement(Be,null)}));function ga(){return n.a.createElement("h2",null,"Page not found")}var va=Object(s.combineReducers)({offersAdd:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"OFFERS_ADD_SHOW_MODAL":return Object(h.a)({},e,{modalShown:!0,user:a.payload.user});case"OFFERS_ADD_HIDE_MODAL":return Object(h.a)({},e,{modalShown:!1,user:null});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"AUTH_SHOW_MODAL":return Object(h.a)({},e,{authModalShown:!0});case"AUTH_HIDE_MODAL":return Object(h.a)({},e,{authModalShown:!1});case"AUTH_SUBSCRIBE":return Object(h.a)({},e,{subscribed:!0});case"AUTH_LOGIN":return Object(h.a)({},e,{authModalShown:!1,authData:a.payload.authData});case"AUTH_LOGOUT":return Object(h.a)({},e,{authData:null,wait:!1});case"AUTH_LOGOUT_WAIT":return Object(h.a)({},e,{wait:!0,logoutError:""});case"AUTH_LOGOUT_ERROR":return Object(h.a)({},e,{logoutError:a.payload.logoutError});default:return e}},gameFinder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GAME_FINDER_SEARCH_PHRASE":return Object(h.a)({},e,{searchPhrase:a.payload.searchPhrase});case"GAME_FINDER_FETCH":return e.pendingPromise===a.payload.pendingPromise?Object(h.a)({},e,{pendingPromise:null}):e;case"GAME_FINDER_FETCH_WAIT":return Object(h.a)({},e,{searchKey:a.payload.searchKey,pendingPromise:a.payload.pendingPromise,gamesFetchError:""});case"GAME_FINDER_FETCH_ERROR":return e.pendingPromise===a.payload.pendingPromise?Object(h.a)({},e,{pendingPromise:null,games:{},gamesFetchError:a.payload.gamesFetchError}):e;case"GAME_FINDER_FETCH_CANCEL":return Object(h.a)({},e,{pendingPromise:null});default:return e}},gameCache:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GAME_CACHE_FETCH_BY_ID":return Object(h.a)({},e,{gamesByIdWait:Object(h.a)({},e.gamesByIdWait,Object(y.a)({},a.payload.gameId,!1)),gamesByIdFetched:Object(h.a)({},e.gamesByIdFetched,Object(y.a)({},a.payload.gameId,!0)),games:Object(h.a)({},e.games,Object(y.a)({},a.payload.gameId,a.payload.game))});case"GAME_CACHE_WAIT_BY_ID":return Object(h.a)({},e,{gamesByIdWait:Object(h.a)({},e.gamesByIdWait,Object(y.a)({},a.payload.gameId,!0)),gamesByIdFetched:Object(h.a)({},e.gamesByIdFetched,Object(y.a)({},a.payload.gameId,!1)),gamesByIdError:Object(h.a)({},e.gamesByIdError,Object(y.a)({},a.payload.gameId,null))});case"GAME_CACHE_ERROR_BY_ID":return Object(h.a)({},e,{gamesByIdWait:Object(h.a)({},e.gamesByIdWait,Object(y.a)({},a.payload.gameId,!1)),gamesByIdFetched:Object(h.a)({},e.gamesByIdFetched,Object(y.a)({},a.payload.gameId,!0)),gamesByIdError:Object(h.a)({},e.gamesByIdError,Object(y.a)({},a.payload.gameId,a.payload.gameByIdError))});default:return e}},offerFinder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"OFFER_FINDER_FETCH":var t={};for(var r in e.offers)e.offers[r].gameId!==a.payload.gameId&&(t[r]=e.offers[r]);return Object(h.a)({},e,{offersForGameWait:Object(h.a)({},e.offersForGameWait,Object(y.a)({},a.payload.gameId,!1)),offersForGameFetched:Object(h.a)({},e.offersForGameFetched,Object(y.a)({},a.payload.gameId,!0)),offers:Object(h.a)({},t,{},a.payload.offersToAdd)});case"OFFER_FINDER_WAIT":return Object(h.a)({},e,{offersForGameWait:Object(h.a)({},e.offersForGameWait,Object(y.a)({},a.payload.gameId,!0)),offersForGameFetched:Object(h.a)({},e.offersForGameFetched,Object(y.a)({},a.payload.gameId,!1)),offersFetchErrors:Object(h.a)({},e.offersFetchErrors,Object(y.a)({},a.payload.gameId,""))});case"OFFER_FINDER_ERROR":return Object(h.a)({},e,{offersForGameWait:Object(h.a)({},e.offersForGameWait,Object(y.a)({},a.payload.gameId,!1)),offersForGameFetched:Object(h.a)({},e.offersForGameFetched,Object(y.a)({},a.payload.gameId,!0)),offersFetchErrors:Object(h.a)({},e.offersFetchErrors,Object(y.a)({},a.payload.gameId,a.payload.offersFetchError))});default:return e}},userCache:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"USER_CACHE_FETCH_BY_OFFER":return Object(h.a)({},e,{usersByOfferWait:Object(h.a)({},e.usersByOfferWait,Object(y.a)({},a.payload.gameId,!1)),usersByOfferFetched:Object(h.a)({},e.usersByOfferFetched,Object(y.a)({},a.payload.gameId,!0)),users:Object(h.a)({},e.users,{},a.payload.users)});case"USER_CACHE_WAIT_BY_OFFER":return Object(h.a)({},e,{usersByOfferWait:Object(h.a)({},e.usersByOfferWait,Object(y.a)({},a.payload.gameId,!0)),usersByOfferFetched:Object(h.a)({},e.usersByOfferFetched,Object(y.a)({},a.payload.gameId,!1)),usersByOfferError:Object(h.a)({},e.usersByOfferError,Object(y.a)({},a.payload.gameId,null))});case"USER_CACHE_ERROR_BY_OFFER":return Object(h.a)({},e,{usersByOfferWait:Object(h.a)({},e.usersByOfferWait,Object(y.a)({},a.payload.gameId,!1)),usersByOfferFetched:Object(h.a)({},e.usersByOfferFetched,Object(y.a)({},a.payload.gameId,!0)),usersByOfferError:Object(h.a)({},e.usersByOfferError,Object(y.a)({},a.payload.gameId,a.payload.usersByOfferError))});case"USER_CACHE_FETCH_BY_ID":return Object(h.a)({},e,{userByIdWait:!1,users:Object(h.a)({},e.users,Object(y.a)({},a.payload.userId,a.payload.user))});case"USER_CACHE_WAIT_BY_ID":return Object(h.a)({},e,{userByIdWait:!0,userByIdError:null});case"USER_CACHE_ERROR_BY_ID":return Object(h.a)({},e,{userByIdWait:!1,userByIdError:a.payload.userByIdError});case"USER_CACHE_UPDATE":return Object(h.a)({},e,{userUpdateWait:!1,users:Object(h.a)({},e.users,Object(y.a)({},a.payload.userId,a.payload.user))});case"USER_CACHE_UPDATE_WAIT":return Object(h.a)({},e,{userUpdateWait:!0,userUpdateError:!1});case"USER_CACHE_UPDATE_ERROR":return Object(h.a)({},e,{userUpdateWait:!1,userUpdateError:a.payload.userUpdateError});default:return e}},chatCache:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"CHAT_CACHE_FETCH_BY_PARTICIPANT":return Object(h.a)({},e,{chatsByParticipantWait:Object(h.a)({},e.chatsByParticipantWait,Object(y.a)({},a.payload.participantId,!1)),chatsByParticipantFetched:Object(h.a)({},e.chatsByParticipantFetched,Object(y.a)({},a.payload.participantId,!0)),chats:Object(h.a)({},e.chats,{},a.payload.chats)});case"CHAT_CACHE_WAIT_BY_PARTICIPANT":return Object(h.a)({},e,{chatsByParticipantWait:Object(h.a)({},e.chatsByParticipantWait,Object(y.a)({},a.payload.participantId,!0)),chatsByParticipantFetched:Object(h.a)({},e.chatsByParticipantFetched,Object(y.a)({},a.payload.participantId,!1)),chatsByParticipantError:Object(h.a)({},e.chatsByParticipantError,Object(y.a)({},a.payload.participantId,null))});case"CHAT_CACHE_ERROR_BY_PARTICIPANT":return Object(h.a)({},e,{chatsByParticipantWait:Object(h.a)({},e.chatsByParticipantWait,Object(y.a)({},a.payload.participantId,!1)),chatsByParticipantFetched:Object(h.a)({},e.chatsByParticipantFetched,Object(y.a)({},a.payload.participantId,!0)),chatsByParticipantError:Object(h.a)({},e.chatsByParticipantError,Object(y.a)({},a.payload.participantId,a.payload.chatsByParticipantError))});case"CHAT_CACHE_ADD_PUSH":return Object(h.a)({},e,{chats:Object(h.a)({},e.chats,Object(y.a)({},a.payload.chatId,a.payload.chat)),chatAddWait:!1});case"CHAT_CACHE_ADD_WAIT":return Object(h.a)({},e,{chatAddWait:!1,chatAddError:null});case"CHAT_CACHE_ADD_ERROR":return Object(h.a)({},e,{chatAddWait:!1,chatAddError:a.payload.addError});default:return e}},clauseCache:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"CLAUSE_CACHE_ADD_PUSH":return Object(h.a)({},e,{clauses:Object(h.a)({},e.clauses,Object(y.a)({},a.payload.clauseId,a.payload.clause)),clauseAddWait:!1});case"CLAUSE_CACHE_ADD_WAIT":return Object(h.a)({},e,{clauseAddWait:!0,clauseAddError:null});case"CLAUSE_CACHE_ADD_ERROR":return Object(h.a)({},e,{clauseAddWait:!1,clauseAddError:a.payload.addError});case"CLAUSE_CACHE_FETCH_BY_CHAT":return Object(h.a)({},e,{clauses:Object(h.a)({},e.clauses,{},a.payload.clauses),clausesByChatWait:Object(h.a)({},e.clausesByChatWait,Object(y.a)({},a.payload.chatId,!1)),clausesByChatFetched:Object(h.a)({},e.clausesByChatFetched,Object(y.a)({},a.payload.chatId,!0))});case"CLAUSE_CACHE_WAIT_BY_CHAT":return Object(h.a)({},e,{clausesByChatWait:Object(h.a)({},e.clausesByChatWait,Object(y.a)({},a.payload.chatId,!0)),clausesByChatFetched:Object(h.a)({},e.clausesByChatFetched,Object(y.a)({},a.payload.chatId,!1)),clausesByChatError:Object(h.a)({},e.clausesByChatError,Object(y.a)({},a.payload.chatId,null))});case"CLAUSE_CACHE_ERROR_BY_CHAT":return Object(h.a)({},e,{clausesByChatWait:Object(h.a)({},e.clausesByChatWait,Object(y.a)({},a.payload.chatId,!1)),clausesByChatFetched:Object(h.a)({},e.clausesByChatFetched,Object(y.a)({},a.payload.chatId,!0)),clausesByChatError:Object(h.a)({},e.clausesByChatError,Object(y.a)({},a.payload.chatId,a.payload.clausesByChatError))});case"CLAUSE_CACHE_UPDATE_STATUS":return Object(h.a)({},e,{clauses:Object(h.a)({},e.clauses,Object(y.a)({},a.payload.clauseId,a.payload.clause)),clausesUpdateWait:!1});case"CLAUSE_CACHE_UPDATE_WAIT":return Object(h.a)({},e,{clausesUpdateWait:!0,clausesUpdateError:null});case"CLAUSE_CACHE_UPDATE_ERROR":return Object(h.a)({},e,{clausesUpdateWait:!1,clausesUpdateError:a.payload.updateError});default:return e}},addressLookupCache:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"ADDRESS_LOOKUP_CACHE_FETCH":return Object(h.a)({},e,{suggestions:a.payload.suggestions,suggestionsFetchWait:!1,suggestionsFetched:!0});case"ADDRESS_LOOKUP_CACHE_FETCH_WAIT":return Object(h.a)({},e,{lookupPhrase:a.payload.lookupPhrase,suggestionsFetchWait:!0,suggestionsFetched:!1});case"ADDRESS_LOOKUP_CACHE_FETCH_ERROR":return Object(h.a)({},e,{suggestionsFetchWait:!1,suggestionsFetched:!0,suggestionsFetchError:a.payload.suggestionsFetchError});default:return e}},userUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"USER_UPDATE_UNSAVED":return Object(h.a)({},e,{user:a.payload.user,isSaved:!1});case"USER_UPDATE_SAVED":return Object(h.a)({},e,{user:a.payload.user,isSaved:!0});default:return e}}}),_a=Object(s.createStore)(va,void 0,Object(l.composeWithDevTools)(Object(s.applyMiddleware)(o.a)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(83);R.a.initializeApp({apiKey:"AIzaSyAbxWCNCtF7lm-fmwg00zbAY11aMWPomz0",authDomain:"unpacked-dev.firebaseapp.com",databaseURL:"https://unpacked-dev.firebaseio.com",projectId:"unpacked-dev",storageBucket:"unpacked-dev.appspot.com",messagingSenderId:"1063122406998",appId:"1:1063122406998:web:615fd045afd6407f"}),u.a.render(n.a.createElement((function(){return n.a.createElement(i.a,{store:_a},n.a.createElement(d.a,null,n.a.createElement(f.b,{component:G}),n.a.createElement(f.d,null,n.a.createElement(f.b,{exact:!0,path:"/",component:Fe}),n.a.createElement(f.b,{exact:!0,path:"/search",component:je}),n.a.createElement(f.b,{exact:!0,path:"/offers/:userId",component:Fe}),n.a.createElement(f.b,{exact:!0,path:"/profile/:uid",component:ze}),n.a.createElement(f.b,{exact:!0,path:"/registration",component:Ve}),n.a.createElement(f.b,{exact:!0,path:"/game/:gameId",component:da}),n.a.createElement(f.b,{exact:!0,path:"/chats",component:ha}),n.a.createElement(f.b,{exact:!0,path:"/chats/:chatId",component:ma}),n.a.createElement(f.b,{exact:!0,path:"/deals/:chatId",component:Ca}),n.a.createElement(f.b,{component:ga})),n.a.createElement(pe,null)))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[60,1,2]]]);
//# sourceMappingURL=main.ccb1120d.chunk.js.map